<!DOCTYPE html>
<html>
	<head>
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
			canvas { display: block; }
		</style>
	</head>
	<body>
		<script src="three.js"></script>
		<script src="OrbitControls.js"></script>
		<script>
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );

			var renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );

			var firstRopeRotation = 0;
			var fourthRopeRotation = 0;


			renderer.shadowMap.enabled = true;
			renderer.shadowMap.type = THREE.PCFSoftShadowMap;


			//directionalLight
			const light = new THREE.DirectionalLight( 
				0xffffff, 1 );
			light.position.set(0,100,80);
			light.castShadow = true;
			light.shadow.mapSize.width =2048; // default
			light.shadow.mapSize.height = 2048; // default
			light.shadow.camera.near = 0.1; // default
			light.shadow.camera.far = 160; // default
			light.shadow.camera.left = -30;
			light.shadow.camera.right = 30;
			light.shadow.camera.top = 50;
			light.shadow.camera.bottom = -30;
			scene.add( light );

			const helper = new THREE.DirectionalLightHelper( light, 30 );
			scene.add( helper );

			const helper1 = new THREE.CameraHelper( light.shadow.camera );
			scene.add( helper1 );


			
			


			



			//mouseMovement
			window.addEventListener('resize', function(){
				var width = window.innerWidth;
				var height = window.innerHeight;
				renderer.setSize(width,height);
				camera.aspect = width/height;
				camera.updateProjectionMatrix();
			});

			controls = new THREE.OrbitControls(camera, renderer.domElement);

			//holder
			const holderGeometry = new THREE.BoxGeometry( 45, 1, 1 );
			const holderMaterial = new THREE.MeshBasicMaterial( {color: 0x00ff00} );
			const holder = new THREE.Mesh( holderGeometry, holderMaterial);
			holder.position.y += 35;
			holder.receiveShadow = true;
			holder.castShadow = true;
			scene.add(holder);

			//rope
			const ropeGeometry = new THREE.BoxGeometry( 0.5, 30, 0.5 );
			const ropeMaterial = new THREE.MeshBasicMaterial( {color: "#FF3800" } );

			// change ropes' origin (pivot) for rotation
    ropeGeometry.translate(0, -15, 0);

			//firstRope
			const firstRope = new THREE.Mesh( ropeGeometry,ropeMaterial);
			firstRope.position.y += 35;
			firstRope.position.x += 15;
			firstRope.receiveShadow = true;
			firstRope.castShadow = true;
			scene.add(firstRope);

			//secondRope
			const secondRope = new THREE.Mesh( ropeGeometry,ropeMaterial);
			secondRope.position.y += 35;
			secondRope.position.x += 5;
			secondRope.receiveShadow = true;
			secondRope.castShadow = true;
			scene.add(secondRope);

			//thirdRope
			const thirdRope = new THREE.Mesh( ropeGeometry,ropeMaterial);
			thirdRope.position.y += 35;
			thirdRope.position.x -= 5;
			thirdRope.receiveShadow = true;
			thirdRope.castShadow = true;
			scene.add(thirdRope);

			//fourthRope
			const fourthRope = new THREE.Mesh( ropeGeometry,ropeMaterial);
			fourthRope.position.y += 35;
			fourthRope.position.x -= 15;
			fourthRope.receiveShadow = true;
			fourthRope.castShadow = true;
			scene.add(fourthRope);


			//ball
			const ballGeometry = new THREE.SphereBufferGeometry( 5, 32, 32 );
			const ballMaterial = new THREE.MeshPhysicalMaterial( {metalness: 1,roughness: 0.6, transparent: true} );


			//firstBall
			const firstBall = new THREE.Mesh( ballGeometry, ballMaterial );
			firstBall.position.y += 5;
			firstBall.position.x += 5;
			firstBall.receiveShadow = true;
			firstBall.castShadow = true;
			scene.add( firstBall );

			//secondBall
			const secondBall = new THREE.Mesh( ballGeometry, ballMaterial );
			secondBall.position.y += 5;
			secondBall.position.x -= 5;
			secondBall.receiveShadow = true;
			secondBall.castShadow = true;
			scene.add( secondBall );

			//thirdBall
			const thirdBall = new THREE.Mesh( ballGeometry, ballMaterial );
			thirdBall.position.y += 5;
			thirdBall.position.x -= 15;
			thirdBall.receiveShadow = true;
			thirdBall.castShadow = true;
			scene.add( thirdBall );

			//fourthBall
			const fourthBall = new THREE.Mesh( ballGeometry, ballMaterial );
			fourthBall.position.y += 5;
			fourthBall.position.x += 15;
			fourthBall.receiveShadow = true;
			fourthBall.castShadow = true;
			scene.add( fourthBall );





			//floor
			var meshFloor = new THREE.Mesh(new THREE.PlaneBufferGeometry(60,80,32,32),
				new THREE.MeshStandardMaterial({color:"#FFFFFF",wireframe:false}));
			meshFloor.rotation.x -= Math.PI / 2;
			meshFloor.receiveShadow = true;
			scene.add(meshFloor);

			//cameraPosition
			camera.position.z =70;

			
			var speed = 0.01;
			var  ang = 45;
			var animate = function () {
				requestAnimationFrame( animate );

				//sphere.rotation.x += 0.01;
				//sphere.rotation.y += 0.01;

				firstRope.rotation.z += speed;

				if(firstRope > ang){
					speed *= -1;

				}
				//firstRope.position.x = 5;



				renderer.render( scene, camera );
			};

			animate();
		</script>
	</body>
</html>
